<!DOCTYPE html>
<html lang="th">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Vanguard Shop - Modern Mono</title>
        <link rel="stylesheet" href="styles.css">
        <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    </head>
    <body>

        <header class="site-header">
            <div class="container header-layout">
                <div class="logo-area">
                    <a href="homepage.html" class="brand-logo">VG SHOP</a>
                </div>

                <nav class="center-nav">
                    <ul>
                        <li><a href="homepage.html" class="active">หน้าหลัก</a></li>
                        <li><a href="#">ร้านค้า</a></li>
                        <li><a href="#">การ์ด</a></li>
                        <li><a href="#">เด็ค</a></li>
                    </ul>
                </nav>

                <div class="right-actions" id="userActionArea">
                    <a href="sign.html" class="btn-signin">เข้าสู่ระบบ</a>
                </div>
            </div>
        </header>

        <section class="hero-section">
            <div class="container hero-content">
                <div class="hero-image">
                    <img src="img/MOCK_VGD_CP08_BOX-2048x1478.png" alt="Minerva Rising" onerror="this.src='https://via.placeholder.com/500x400?text=Product+Image'"> 
                </div>
                <div class="hero-info">
                    <h2 class="product-title">Minerva Rising (D-CP08)</h2>
                    <p class="product-desc">
                        สัมผัสพลังแห่งนางฟ้า Collector Pack 8 ชุดล่าสุดรวบรวมการ์ดระดับสูง 
                        พร้อมให้คุณเป็นเจ้าของแล้ววันนี้ การ์ดหายากและการ์ดพิเศษรอคุณอยู่
                    </p>
                    <p class="product-price">฿900.00</p>
                    <button class="btn-primary">สั่งซื้อสินค้า</button>
                </div>
            </div>
        </section>

        <section class="grid-section">
            <div class="container">
                <h3 class="section-header">สินค้าแนะนำ</h3>
                <div class="product-grid">
                    
                    <div class="card product-card">
                        <img src="img/MOCK_storagebox_ss03_th-2048x1991.png" alt="Chronojet" onerror="this.src='https://via.placeholder.com/300x250?text=Product'">
                        <div class="card-body">
                            <h4>Stride Deckset -Chronojet-</h4>
                            <p class="price">฿600</p>
                            <button class="btn-outline">ดูรายละเอียด</button>
                        </div>
                    </div>

                    <div class="card product-card">
                        <img src="img/MOCK_VGG_CD08_0-2048x1713.png" alt="Pale Moon" onerror="this.src='https://via.placeholder.com/300x250?text=Product'">
                        <div class="card-body">
                            <h4>G-CD08: Pale Moon Deck</h4>
                            <p class="price">฿69</p>
                            <button class="btn-outline">ดูรายละเอียด</button>
                        </div>
                    </div>

                    <div class="card product-card">
                        <img src="img/MOCK_VGD_SD04.png" alt="Sylvan King" onerror="this.src='https://via.placeholder.com/300x250?text=Product'">
                        <div class="card-body">
                            <h4>Start Deck 04: Sylvan King</h4>
                            <p class="price">฿99</p>
                            <button class="btn-outline">ดูรายละเอียด</button>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <section class="news-section">
            <div class="container">
                <h3 class="section-header">ข่าวสารอัพเดต</h3>
                <div class="news-grid">
                    
                    <article class="card news-card">
                        <img src="img/597439977_1275306241309442_5733098840038127387_n.jpg" alt="News 1" onerror="this.src='https://via.placeholder.com/300x250?text=News'">
                        <div class="card-body news-body">
                            <span class="news-date">24 ธันวาคม 2025</span>
                            <h4>สินค้าใหม่: Masked Rider เข้าไทยแล้ว!</h4>
                            <p class="excerpt">พบกับบูสเตอร์ชุดใหม่ล่าสุดจากการ์ตูนดัง Masked Rider พร้อมวางจำหน่ายแล้วที่หน้าร้าน...</p>
                            <a href="#" class="read-more">อ่านต่อ <i class="fa-solid fa-arrow-right"></i></a>
                        </div>
                    </article>

                    <article class="card news-card">
                        <img src="img/LINE_ALBUM_ปฏิทินงานอีเวนท์-2569-Update-261268_260113_3.jpg" alt="News 2" onerror="this.src='https://via.placeholder.com/300x250?text=News'">
                        <div class="card-body news-body">
                            <span class="news-date">20 ธันวาคม 2025</span>
                            <h4>ตารางการแข่งขันประจำเดือนมกราคม</h4>
                            <p class="excerpt">เตรียมเด็คของคุณให้พร้อม! สมัครเข้าร่วมการแข่งขันชิงแชมป์ประจำร้าน เงินรางวัลรวมกว่า...</p>
                            <a href="#" class="read-more">อ่านต่อ <i class="fa-solid fa-arrow-right"></i></a>
                        </div>
                    </article>

                    <article class="card news-card">
                        <img src="img/arenafight12_2023.jpg" alt="News 3" onerror="this.src='https://via.placeholder.com/300x250?text=News'">
                        <div class="card-body news-body">
                            <span class="news-date">15 ธันวาคม 2025</span>
                            <h4>โปรโมชั่นส่งท้ายปีเก่า ต้อนรับปีใหม่</h4>
                            <p class="excerpt">ลดราคาสินค้าหมวด Accessories สูงสุด 50% และรับการ์ด PR พิเศษเมื่อซื้อครบ 500 บาท...</p>
                            <a href="#" class="read-more">อ่านต่อ <i class="fa-solid fa-arrow-right"></i></a>
                        </div>
                    </article>

                </div>
            </div>
        </section>

        <footer class="site-footer">
            <div class="container footer-layout">
                <div class="footer-left">
                    <h2>VG SHOP</h2>
                    <p>The best card shop in town.</p>
                </div>

                <div class="footer-right">
                    <p>ติดต่อ: 02-999-9999 | support@vgshop.com</p>
                    <p>&copy; 2026 VG SHOP. สงวนลิขสิทธิ์.</p>
                </div>
            </div>
        </footer>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

            const firebaseConfig = {
                apiKey: "AIzaSyAV3snK_1l53ZX1ITml_crwAJSrJP_3BIU",
                authDomain: "vg-shop-c7056.firebaseapp.com",
                projectId: "vg-shop-c7056",
                storageBucket: "vg-shop-c7056.firebasestorage.app",
                messagingSenderId: "630247091832",
                appId: "1:630247091832:web:d885fe3dfc610501fc478d",
                measurementId: "G-CDDZVHLC2G"
            };

            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const actionArea = document.getElementById('userActionArea');

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    const userName = user.email.split('@')[0];
                    
                    // แสดงผลรูปโปรไฟล์ (หน้า) + ชื่อ (หลัง) + เมนู Dropdown ครบชุด
                    actionArea.innerHTML = `
                        <div class="user-profile" onclick="toggleDropdown()" style="display: flex; align-items: center; gap: 10px; cursor: pointer; position: relative; padding: 5px 12px; border-radius: 50px;">
                            <div class="user-avatar" style="width: 35px; height: 35px; background-color: #1a1a1a; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; border: 2px solid #eee;">
                                <i class="fa-solid fa-user" style="font-size: 16px;"></i>
                            </div>
                            
                            <span class="user-name" style="font-weight: 500; color: #333; font-size: 0.95rem;">${userName}</span>
                            
                            <div class="dropdown-menu" id="profileDropdown" style="display: none; position: absolute; top: 120%; right: 0; background: white; box-shadow: 0 8px 25px rgba(0,0,0,0.15); border-radius: 12px; min-width: 200px; z-index: 1000; border: 1px solid #f0f0f0; overflow: hidden;">
                                <a href="account-info.html" style="display: flex; align-items: center; padding: 12px 15px; color: #333; font-size: 0.9rem; text-decoration: none; border-bottom: 1px solid #f8f8f8;">
                                    <i class="fa-solid fa-address-card" style="width: 20px; margin-right: 10px; color: #555;"></i> ข้อมูลบัญชี
                                </a>
                                <a href="account-settings.html" style="display: flex; align-items: center; padding: 12px 15px; color: #333; font-size: 0.9rem; text-decoration: none; border-bottom: 1px solid #f8f8f8;">
                                    <i class="fa-solid fa-user-gear" style="width: 20px; margin-right: 10px; color: #555;"></i> ตั้งค่าบัญชี
                                </a>
                                <a href="billing-settings.html" style="display: flex; align-items: center; padding: 12px 15px; color: #333; font-size: 0.9rem; text-decoration: none; border-bottom: 1px solid #f8f8f8;">
                                    <i class="fa-solid fa-wallet" style="width: 20px; margin-right: 10px; color: #555;"></i> ตั้งค่าการเงิน
                                </a>
                                <a href="#" id="logoutBtn" style="display: flex; align-items: center; padding: 12px 15px; color: #ff4d4d; font-size: 0.9rem; font-weight: 500; text-decoration: none;">
                                    <i class="fa-solid fa-right-from-bracket" style="width: 20px; margin-right: 10px;"></i> ออกจากระบบ
                                </a>
                            </div>
                        </div>
                    `;

                    // ผูกเหตุการณ์คลิกปุ่ม Logout
                    document.getElementById('logoutBtn').addEventListener('click', (e) => {
                        e.preventDefault();
                        signOut(auth).then(() => {
                            localStorage.removeItem('isLoggedIn');
                            window.location.reload();
                        });
                    });

                } else {
                    // กรณีไม่ได้ Login
                    actionArea.innerHTML = `<a href="sign.html" class="btn-signin">เข้าสู่ระบบ</a>`;
                }
            });

            // ฟังก์ชันเปิด/ปิด Dropdown
            window.toggleDropdown = function() {
                const dropdown = document.getElementById('profileDropdown');
                if (dropdown) {
                    const isVisible = dropdown.style.display === 'block';
                    dropdown.style.display = isVisible ? 'none' : 'block';
                }
            }

            // ปิด Dropdown เมื่อคลิกข้างนอก
            window.onclick = function(event) {
                if (!event.target.closest('.user-profile')) {
                    const dropdown = document.getElementById('profileDropdown');
                    if (dropdown) dropdown.style.display = 'none';
                }
            }
        </script>
    </body>
</html>
