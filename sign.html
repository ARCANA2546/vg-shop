<!DOCTYPE html>
<html lang="th">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>เข้าสู่ระบบ - VG SHOP</title>
        <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>

        <header class="site-header">
            <div class="container">
                <div class="header-layout">
                    <div class="logo-area">
                        <a href="homepage.html" class="brand-logo">VG SHOP</a>
                    </div>
                    <nav class="center-nav">
                        <ul>
                            <li><a href="homepage.html">หน้าหลัก</a></li>
                            <li><a href="#">ร้านค้า</a></li>
                            <li><a href="#">การ์ด</a></li>
                            <li><a href="#">เด็ค</a></li>
                        </ul>
                    </nav>
                    <div class="right-actions">
                    </div>
                </div>
            </div>
        </header>

        <section class="login-section">
            <div class="login-card">
                <h2>ยินดีต้อนรับ</h2>
                <p class="sub-text">กรุณาเข้าสู่ระบบเพื่อดำเนินการต่อ</p>
                
                <form action="homepage.html">
                    <div class="form-group">
                        <label for="loginInput">อีเมล หรือ ชื่อผู้ใช้</label>
                        <input type="text" id="loginInput" class="form-input" placeholder="กรอกอีเมล หรือ ชื่อผู้ใช้" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">รหัสผ่าน</label>
                        <input type="password" id="password" class="form-input" placeholder="กรอกรหัสผ่าน" required>
                    </div>

                    <div class="forgot-pass">
                        <a href="forgot-password.html">ลืมรหัสผ่าน?</a>
                    </div>

                    <button type="submit" class="btn-login">เข้าสู่ระบบ</button>
                </form>

                <div class="divider">
                    <span>ยังไม่มีบัญชีสมาชิก?</span>
                </div>

                <a href="signup.html" style="text-decoration: none;">
                    <button type="button" class="btn-register">สมัครสมาชิก</button>
                </a>
            </div>
        </section>

        <footer class="site-footer">
            <div class="container">
                <div class="footer-layout">
                    <div class="footer-left">
                        <h2>VG SHOP</h2>
                        <p>ศูนย์รวมการ์ดเกมที่ครบวงจรที่สุด</p>
                    </div>
                    <div class="footer-right">
                        <p>&copy; 2024 VG Shop. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>

        <script type="module">
            // 1. Import ต้องอยู่บนสุดเสมอ
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

            // 2. ข้อมูล Firebase Config ของคุณ
            const firebaseConfig = {
                apiKey: "AIzaSyAV3snK_1l53ZX1ITml_crwAJSrJP_3BIU",
                authDomain: "vg-shop-c7056.firebaseapp.com",
                projectId: "vg-shop-c7056",
                storageBucket: "vg-shop-c7056.firebasestorage.app",
                messagingSenderId: "630247091832",
                appId: "1:630247091832:web:d885fe3dfc610501fc478d",
                measurementId: "G-CDDZVHLC2G"
            };

            // 3. เริ่มต้น Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);

            // 4. ส่วนควบคุมปุ่ม Login (ปรับจากโค้ดเดิมของคุณ)
            const form = document.querySelector('form');
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                const email = document.getElementById('loginInput').value;
                const inputPass = document.getElementById('password').value;

                try {
                    // เปลี่ยนจากเช็คใน localStorage มาเช็คที่ Firebase ออนไลน์
                    const userCredential = await signInWithEmailAndPassword(auth, email, inputPass);
                    
                    // ถ้าผ่าน ให้เก็บสถานะแล้วไปหน้าถัดไป
                    localStorage.setItem('isLoggedIn', 'true');
                    window.location.href = 'homepage.html';
                } catch (error) {
                    console.error(error);
                    alert('อีเมลหรือรหัสผ่านไม่ถูกต้อง (ต้องสมัครผ่าน Firebase ก่อนนะครับ)');
                }
            });
        </script>
    </body>
</html>